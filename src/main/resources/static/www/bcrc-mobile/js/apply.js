$(document).ready(function(){$(document).on("click",".back",function(){closeresumepage()})});var applyjob=function(d){var i=$_CONFIG.template;var h=window.location.href.replace(/pageno=[0-9]*/i,"pageno=1");h=h.replace(/&filttertype=loginmore/i,"");h=h.replace(/&filttertype=overfiltter/i,"");var k=$("#applyresumeid").val();var b=$("#quickpostset").val();var g=$("#prp").length>0?$("#prp").val():"";var f=$("#cp").length>0?$("#cp").val():"";var e=$("#prd").length>0?$("#prd").val():"";var a=$_CONFIG.domain+"ajax/search/apply.ajax.php";var c={jobid:d,rsmid:k,url:h,quickpostset:b,template:i,prp:g,cp:f,prd:e};var j=ajaxRequest(a,c,"post","json");if(j.status==1){if(i=="my/rsmmatch"||i=="my/compete"){pop.ini(["职位申请成功"],["确定","repeatpage()"])}else{if(i=="search/jobdetail"){location.href=$_CONFIG.domain+"search/applysuccess.php?jobid="+d.split(":")[0];return false}showSuccessPop()}pagedeal(i,j.type,j.filterjobid);closeresumepage()}else{if(j.status==0){pop.ini([[j.desc,"warn"]],["确定"]);closeresumepage()}else{if(j.status=="-1"){location.href=j.url}else{if(j.status=="-2"){selectresume(j.rsmlist)}else{if(j.status=="-3"){pop.ini([[j.desc,"warn"]],["确定","jumppage('"+j.url+"')"])}}}}}};var selectresume=function(a){$(".selectresume").empty().addClass("fixtop");var c="";c+='<div class="top"><a href="javascript:void(0);" class="back"></a>选择申请简历</div>';c+='<div class="phit">请选择申请简历</div>';c+='<div class="pbox">';for(var b in a){if(b==0){c+='<div class="e on applyrsm" value="'+a[b].resumeid+'">'+a[b].resumename+"</div>";$("#applyresumeid").val(a[b].resumeid)}else{c+='<div class="e applyrsm" value="'+a[b].resumeid+'">'+a[b].resumename+"</div>"}}$("#quickpostset").val("1");c+="</div>";c+='<div class="pmsg on"><span>设置为快速投递简历（推荐）</span><div class="p">你也可以去简历中心修改快速投递简历</div></div>';c+='<center class="btnbox b3"><button class="btn toapply">确定</button></center>';$(".selectresume").append(c);$(".applyrsm").click(function(){$(".applyrsm").removeClass("on");$(this).addClass("on");var d=$(this).attr("value");$("#applyresumeid").val(d)});$(".pmsg").click(function(){if($(this).hasClass("on")){$(this).removeClass("on");$("#quickpostset").val(0)}else{$(this).addClass("on");$("#quickpostset").val(1)}});showresumepage()};var showresumepage=function(){window.scrollTo(0,0);$("#pageTop,#pageFooter,#pageContent,#nl").hide();$("#pageWp").css("padding-top","0px");$(".selectresume").show()};var closeresumepage=function(){$(".selectresume").hide();$("#pageWp").css("padding-top","96px");$("#pageTop,#pageFooter,#pageContent,#nl").show();$("#applyresumeid").val("")};var pagedeal=function(c,b,d){switch(c){case"my/mycollection":if(b==5){$(".checked").each(function(){var e=$(this).attr("value");if($.inArray(e,d)=="-1"){$(this).siblings("p").removeClass("c_blue").addClass("c_orange").text("已申请")}})}else{$(".checked").siblings("p").removeClass("c_blue").addClass("c_orange").text("已申请")}break;case"search/jobmore":case"search/joblist":case"company/joblist":case"search/coalljob":case"company/coalljob":case"search/jobdiscover":case"search/applysuccess":case"wx/psearchsuc":if(b==5){$(".checked").each(function(){var e=$(this).attr("value");if($.inArray(e,d)=="-1"){$(this).addClass("applied").removeClass("checked").removeClass("jobid")}})}else{$(".checked").addClass("applied").removeClass("checked").removeClass("jobid")}var a=0;$(".jobid").each(function(){a++});if(a<1){$(".qx").addClass("applied").removeClass("on")}break;case"search/jobdetail":$(".sq").addClass("mark").text("已申请");break}};function repeatpage(){window.location.reload()}function jumppage(a){location.href=a}var showSuccessPop=function(){var a="";a+='<div class="iapply">';a+='<div class="icon">';a+='<div class="bin"></div>';a+="</div>";a+='<svg width="80" height="80" viewBox="0 0 80 80">';a+='<circle class="st0" cx="42.8" cy="4.3" r="1.5"/>';a+='<circle class="st0" cx="68.9" cy="61.4" r="1.4"/>';a+='<circle class="st0" cx="17.6" cy="72.8" r="1.4"/>';a+='<circle class="st0" cx="13.9" cy="63.5" r="1"/>';a+='<path class="st0" d="M69.6,10.4c-1.6,0-2.9,1.3-2.9,2.9s1.3,2.9,2.9,2.9c1.6,0,2.9-1.3,2.9-2.9S71.2,10.4,69.6,10.4z M71.5,13.3c0,1-0.9,1.9-1.9,1.9c-1,0-1.9-0.9-1.9-1.9s0.9-1.9,1.9-1.9C70.6,11.4,71.5,12.3,71.5,13.3z"/>';a+='<path class="st0" d="M4.3,38.4c-1.5,0-2.7,1.2-2.7,2.7s1.2,2.7,2.7,2.7s2.7-1.2,2.7-2.7S5.8,38.4,4.3,38.4z M5.8,41.1c0,0.8-0.7,1.5-1.5,1.5c-0.8,0-1.5-0.7-1.5-1.5c0-0.8,0.7-1.5,1.5-1.5C5.1,39.6,5.8,40.3,5.8,41.1z"/>';a+='<path class="st0" d="M65.3,19c-1,0-1.9,0.8-1.9,1.9s0.8,1.9,1.9,1.9s1.9-0.8,1.9-1.9S66.3,19,65.3,19z M66.1,20.9c0,0.5-0.4,0.8-0.8,0.8s-0.8-0.4-0.8-0.8s0.4-0.8,0.8-0.8S66.1,20.4,66.1,20.9z"/>';a+='<polygon class="st0" points="12.2,22.8 10.1,22.8 10.1,20.7 8.9,20.7 8.9,22.8 6.8,22.8 6.8,24 8.9,24 8.9,26.1 10.1,26.1 10.1,24 12.2,24 "/>';a+='<polygon class="st0" points="60.6,5.2 58.8,5.2 58.8,3.4 57.8,3.4 57.8,5.2 56,5.2 56,6.2 57.8,6.2 57.8,8 58.8,8 58.8,6.2 60.6,6.2 "/>';a+='<polygon class="st0" points="61.5,70.1 59.7,70.1 59.7,68.3 58.6,68.3 58.6,70.1 56.8,70.1 56.8,71.2 58.6,71.2 58.6,73 59.7,73 59.7,71.2 61.5,71.2 "/>';a+="</svg>";a+="</div>";a+='<p class="a_success">职位申请成功!</p>';if($("#successpop").length>0){$("#successpop").empty().append(a)}else{pop.msg(a)}};