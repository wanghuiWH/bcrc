$(function(){bfun_code=eval(bfun_c),bfun_value=eval(bfun_v),fun_code=eval(fun_c),fun_value=eval(fun_v)});function setFuntypePage(d,c){if($(".calendar ").css("display")=="block"){$(".calendar ").hide()}Afun=new Array();Afuntext=new Array();$_obj=$(d);$_multi=c;str_fun=$_obj.next().val();if(str_fun){Afun=str_fun.split(",")}if(Afun!=""){$_funnum=Afun.length;str_funtext=$_obj.text();Afuntext=str_funtext.split(",")}else{$_funnum=0}for(ele in Afun){if(Afun[ele]==""){Afun.splice($.inArray(Afun[ele],Afun),1)}}if(!$("#bfuntype")[0]){var b="";if($_multi==1){b+='<div id="bfuntype" class="cover cover_fix2"><div class="top on"><a href="javascript:void(0);" class="back" onclick="pagefunhide();"></a><a href="javascript:void(0);" class="ok" onclick="setMultiFun();">确定</a><span>职能选择</span><div class="all off"><div class="tit" id="hasFun" onclick="showMultiFun(this);">已选职能（'+$_funnum+'/5）<span>收起</span></div><div class="con" id="funcontent" style="display:block();">';if(Afun!=""){for(ele in Afun){b+='<div class="e" value="'+Afun[ele]+'"><em onclick="cancelMultiFun(this);"></em>'+Afuntext[ele]+"</div>"}}b+="</div></div></div>"}else{b+='<div id="bfuntype" class="cover fixtop"><div class="top"><a href="javascript:void(0);" onclick="pagefunhide();return false;" class="back"></a><span>职能选择</span></div>'}b+='<div class="plist">';for(ele in bfun_code){if($_CONFIG.template=="resume/workexp"||$_CONFIG.template=="resume/guide3"||$_CONFIG.template=="resume/guide4"||$_CONFIG.template=="resume/jobintent"||$_CONFIG.template=="resume/pastebaseinfo"){if(bfun_code[ele]=="0000"){continue}}var a=bfun_code[ele]=="0000"?" io":"";b+='<div class="i'+a+'" onclick="setFuntypeChild(this);" value="'+bfun_code[ele]+'"><span>'+bfun_value[ele]+"</span></div>"}b+="</div></div>";$("body").append(b)}if($("#pageContent")[0]){$("#pageContent").hide()}if($("#pageWp")[0]){$("#pageWp").hide()}$("#bfuntype").show();scrollTo(0,0);return false}function setFuntypeChild(d){var a=$(d).attr("value");if(a=="0000"){$_obj.addClass("c_default").text("不限");$_obj.next().val("");pagefunhide();return false}$(d).toggleClass("down");$("#bfuntype .plist .i").each(function(){if($(this).attr("value")!=a&&$(this).hasClass("down")){$(this).removeClass("down")}});if($(d).hasClass("down")){if(!$(d).next().hasClass("clist")){var b="";b+='<div class="clist childfun" style="display:block">';for(ele in fun_code){if(fun_code[ele].substr(0,2)==a.substr(0,2)){if($_CONFIG.template=="resume/workexp"||$_CONFIG.template=="resume/guide3"){if(fun_code[ele].substr(2,2)=="00"){continue}}if($_multi==1){var c=$.inArray(fun_code[ele],Afun)!="-1"?"on":"";b+='<a href="javascript:void(0);" class="'+c+'" onclick="setMultiFuntype(this);" value="'+fun_code[ele]+'">'+fun_value[ele]+"</a>"}else{b+='<a href="javascript:void(0);" onclick="setFuntype(this);" value="'+fun_code[ele]+'">'+fun_value[ele]+"</a>"}}}b+="</div>";$(".childfun").hide();$(d).after(b)}else{$(".childfun").hide();$(d).next().show()}}else{$(d).next().hide()}return false}function setFuntype(c){var a=$(c).attr("value"),b=$(c).text();$(".childfun a").each(function(){if($(this).attr("value")==a){$(this).addClass("on")}else{$(this).removeClass("on")}});$("#funtypename").removeClass("c_default").removeClass("c_gary").text(b);$("#funtype").val(a);$("#position").val(b);$("#err_funtypename,#err_position").hide();pagefunhide();return false}function setMultiFuntype(g){var d=$(g).attr("value"),e=$(g).text();var h=d.substr(2,2),a=d.substr(0,2);if(!$(g).hasClass("on")){if(h=="00"){var f=new Array();$.each(Afun,function(j,i){if(i.substr(0,2)!=a){f.push(i)}});Afun=f;if(Afun.length==5){pop.ini([["您已经选择了5个职能，如需更换，请取消后重新选择！","warn"]],["确定"]);return false}else{$(g).addClass("on").siblings().removeClass("on");$("#funcontent .e").each(function(){if($(this).attr("value").substr(0,2)==a){$(this).remove()}});Afun.push(d);var c="";c+='<div class="e" value="'+d+'"><em onclick="cancelMultiFun(this);"></em>'+e+"</div>";$("#funcontent").append(c);var b=$("#hasFun").parent().hasClass("off")?"收起":"展开";$("#hasFun").html("已选职能（"+Afun.length+"/5）<span>"+b+"</span>")}}else{$(g).siblings().each(function(){if($(this).attr("value")==a+"00"&&$(this).hasClass("on")){$(this).removeClass("on");Afun.splice($.inArray($(this).attr("value"),Afun),1);$("#funcontent .e").each(function(){if($(this).attr("value")==a+"00"){$(this).remove()}})}});if(Afun.length<5){$(g).addClass("on");Afun.push(d);var c="";c+='<div class="e" value="'+d+'"><em onclick="cancelMultiFun(this);"></em>'+e+"</div>";$("#funcontent").append(c);var b=$("#hasFun").parent().hasClass("off")?"收起":"展开";$("#hasFun").html("已选职能（"+Afun.length+"/5）<span>"+b+"</span>")}else{pop.ini([["您已经选择了5个职能，如需更换，请取消后重新选择！","warn"]],["确定"])}}}else{$(g).removeClass("on");Afun.splice($.inArray(d,Afun),1);$_funnum--;$("#funcontent .e").each(function(){if($(this).attr("value")==d){$(this).remove()}});var b=$("#hasFun").parent().hasClass("off")?"收起":"展开";$("#hasFun").html("已选职能（"+Afun.length+"/5）<span>"+b+"</span>")}return false}function cancelMultiFun(c){var b=$(c).parent().attr("value");Afun.splice($.inArray(b,Afun),1);$(c).parent().remove();var a=$("#hasFun").parent().hasClass("off")?"收起":"展开";$("#hasFun").html("已选职能（"+Afun.length+"/5）<span>"+a+"</span>");$(".childfun a").each(function(){if($(this).attr("value")==b){$(this).removeClass("on")}})}function showMultiFun(a){if($(a).parent().hasClass("off")){$(a).parent().removeClass("off").addClass("on");$(a).find("span").text("展开");$("#funcontent").hide();return false}else{$(a).parent().addClass("off").removeClass("on");$(a).find("span").text("收起");$("#funcontent").show();return false}}function setMultiFun(){Afuntext.length=0;$("#funcontent .e").each(function(){Afuntext.push($(this).text())});var a=Afuntext.join(","),b=Afun.join(",");if(b){$_obj.text(a).removeClass("c_default").removeClass("c_gary");$_obj.next().val(b)}else{$_obj.addClass("c_default").text("请选择");$_obj.next().val("")}if($("#err_funtype").css("display")=="block"){$("#err_funtype").hide()}pagefunhide()}function pagefunhide(){$("#bfuntype").hide();$("#pageContent").show();$("#pageWp").show();$("#bfuntype").remove();scrollTo(0,0);return false};