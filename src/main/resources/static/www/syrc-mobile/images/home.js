window.onload=function(){var f=$(".hban img").eq(0).height();$(".hban").css("height",f);$(".hban .swiper-container").css("height",f);var g=$(".hadd img").eq(0).height();$(".hadd").css("height",g);$(".hadd .swiper-container").css("height",g);var i=$(".hnav").height();$(".hnav .swiper-container").css("height",i);var a=$(".hban .swiper-container a").length<=1?false:true;var d=$(".hban .swiper-container a").length<=1?"":".hban .swiper-pagination";var c=new Swiper(".hban .swiper-container",{pagination:d,paginationClickable:true,autoplay:3000,speed:700,loop:a});var e=$(".hadd .swiper-container a").length<=1?false:true;var b=$(".hadd .swiper-container a").length<=1?"":".hadd .swiper-pagination";var j=new Swiper(".hadd .swiper-container",{pagination:b,paginationClickable:true,autoplay:3000,speed:700,loop:e});var h=new Swiper(".hnav .swiper-container",{pagination:".hnav .swiper-pagination",paginationClickable:true})};$(function(){$("#shadow").remove();$("#pageWp").append('<div id="shadow" style="display:none"></div>');var b=new Swiper(".scroll.swiper-container",{scrollContainer:true,mousewheelControl:true,mode:"vertical"});$(".search .scroll").css({width:"100%",height:"auto"});$("#keyword").bind("input",function(){if($(this).val()!=""){$("#emptykeyword").show();$("#closethispop").hide();$("#tosearch").show()}else{$("#emptykeyword").hide();$("#tosearch").hide();$("#closethispop").show()}assocJob()});$("#emptykeyword").click(function(){$("#assoc").hide();$("#pageTop .sbox").show();$("#keyword").val("").focus()});$("#keyword").focus(function(){var d=$(this).val();if(d!=""){$("#closethispop").hide();$("#tosearch").show();$("#emptykeyword").show()}else{$("#tosearch").hide();$("#closethispop").show();$("#emptykeyword").hide()}});$("#showkeywordtype").click(function(){if(!$(".in").hasClass("on")){$(".in").addClass("on");$(".tabfix").show()}else{$(".in").removeClass("on");$(".tabfix").hide()}});$(".tabfix span").click(function(){var d=$(this).attr("value"),e=$(this).text();$("#keywordtype").val(d);$("#showkeywordtype").attr("value",d);$("#showkeywordtype").text(e);if(!$(".in").hasClass("on")){$(".in").addClass("on")}else{$(".in").removeClass("on")}$(".tabfix").hide()});$("#persearchlist .e em").click(function(){var d=$(this).attr("value");a.href=$_CONFIG.domain+"my/mysearcherjump.php?searchid="+d;return false});$("#persearchlist .e").click(function(){if(!$(this).hasClass("on")){$(this).addClass("on");$(this).next().show()}else{$(this).removeClass("on");$(this).next().hide()}b.reInit();b.resizeFix()});$("#tosearch").click(function(){indextosearch()});$(".sousuo").click(function(){var d=$(this).attr("value");window.location.href=$_CONFIG.domain+"my/mysearcherjump.php?searchid="+d;return false});var a=storage.json_get("location");if(a.areacode==""||a.areacode==undefined){if(geo.getLocation){var c=geo.getLocation()}else{showLoginPop()}}else{showLoginPop()}$(".closeloginpop").click(function(){$("#lead").hide();$("#shadow").hide().bind("click",function(){closepop()});$(".guidance").show();$("body").attr("style","");$("#pageWp").addClass("hdl");$("#pageFooter").addClass("page_dl");$("#goTop").addClass("dl");if(JSON.stringify(backresult)!="{}"){showChangeAreaPop()}});$(".closeWxPop").click(function(){closewxpop()});$(".inputframe .btn").click(function(){ModalHelper.popShow();$(".inputframe").hide();$(".search").show().find("input").focus();$(".search").on("touchmove",bodyScroll,false);$("#pageTop").css("z-index",10);if(!$("#pageTop .btnbox").hasClass("fix")){$("#pageWp").removeClass("off").addClass("on")}else{$(".search").addClass("fix")}var d=getLog("search_log");var e="";e+='<div class="stit">搜索记录</div>';if(d.length>0){e+='<div class="shis">';$.each(d,function(f,g){e+='<a href="javascript:void(0)" onclick="logSearch(\''+g.url+"')\">"+g.name+"</a>"});e+="</div>"}else{e+='<div class="snone">暂无记录，你还未搜索过职位</div>'}$("#searchlog").empty().append(e);b.reInit()});$(".search .in .btn,.search .close,#shadow").click(function(){ModalHelper.popHide();$("#pageTop .btnbox").show();$(".search").hide();$(".search").off("touchmove",bodyScroll,false);$("#pageTop").css("z-index",3);if($("#pageWp").hasClass("on")){$("#pageWp").removeClass("on").addClass("off")}if($(".search").hasClass("fix")){$(".search").removeClass("fix")}closepop();return false});$(".createsearcher").click(function(){window.location.href=$_CONFIG.domain+"my/mysearchercreate.php";return false})});var backresult={};function showLoginPop(){var a=$("#isshowloginpop").val();if(a){$(".guidance").hide();$("#lead").show();$("#shadow").show().unbind("click");$("body").css({overflow:"hidden"})}}function showChangeAreaPop(){if(backresult.status=="0"){areaname_gps=backresult.areaname_gps;areacode_gps=backresult.areacode_gps;areaname_ip=backresult.areaname_ip;areacode_ip=backresult.areacode_ip;$("#pageTop").css("z-index",10);pop.ini([backresult.desc],[["取消","切换"],["cancelLocation()","changeLocation()"]])}else{if(backresult.status=="1"){storage.json_set("location",{areacode:backresult.areacode,areaname:backresult.areaname});$("body").scrollTop(0)}}}function indextosearch(){var a=$("#keyword").val(),b=$("#showkeywordtype").attr("value");location.href=$_CONFIG.domain+"search/joblist.php?from=home_searchbutton&keyword="+encodeURIComponent(a)+"&keywordtype="+b}var kwdSearchData=[];function assocJob(){if($("#keyword").val()!=""){$("#pageTop .sbox").hide();keywordtype=$("#showkeywordtype").attr("value");var b="//kwdsrv.51job.com/KwdSrvByKey/default.aspx?";var d=keywordtype;var a=new Array("Job","51jobcompany","51joball");var c=encodeURIComponent($("#keyword").val());b=b+"src="+a[d]+"&kwd="+c+"&callback=?";$.getJSON(b,function(e){if("1"==e.message){if(""!=e.content){kwdSearchData[c]=unescape(e.content).split("\t")}else{kwdSearchData[c]=""}}$("#assoc").children().remove();kwdSearchShow(kwdSearchData[c])});$("#assoc").show()}else{$("#pageTop .sbox").show();$("#assoc").hide()}search.reInit()}var kwdSearchShow=function(a){var e="";if(typeof(a)==="undefined"||a==""){$("#assoc").html("暂无相关的关键词")}else{$("#assoc").html("");var d=new RegExp("'","g");var c=0;var b=$("#keyword").val();if(typeof(a)!="undefined"){e+="<ul>";$.each(a,function(g,f){g++;if(g<=6){e+='<li class="at" onclick="keysearch(\''+f.replace(d,"\\'")+"');\" >"+f+"<span></span></li>"}});e+="</ul>"}$("#assoc").append(e)}};var keysearch=function(b){var a=$("#showkeywordtype").attr("value");location.href=$_CONFIG.domain+"/search/joblist.php?&from=home_searchlengend&keyword="+encodeURIComponent($.trim(b))+"&keywordtype="+a;return false};var cancelLocation=function(){if(areaname_ip!=""&&areacode_ip!=""){storage.json_set("location",{areacode:areaname_ip,areaname:areacode_ip})}pop.close()};var changeLocation=function(){var a=ajaxRequest($_CONFIG.domain+"/ajax/in/changelocation.ajax.php/?areaname="+areaname_gps+"&areacode="+areacode_gps);storage.json_set("location",{areacode:a.areacode,areaname:a.areaname});$("body").scrollTop(0);history.go(0);pop.close()};var successCallback=function(b){showLoginPop();lat=b.coords.latitude;lng=b.coords.longitude;ret=ajaxRequest($_CONFIG.domain+"/ajax/in/chooselocation.ajax.php?lat="+lat+"&lng="+lng);backresult=ret;var a=$("#isshowloginpop").val();if(!a){showChangeAreaPop()}};var errorCallback=function(){console.log("定位失败");showLoginPop()};function closepop(){$(".search").removeClass("search_fix");$("#shadow,.tabfix").hide();$("body").css({overflow:"scroll",position:"static"});if($(".in").hasClass("on")){$(".in").removeClass("on");$(".tabfix").hide()}$("#lead").hide()}var closewxpop=function(){$(".index_bottom_pop").hide();$("#pageFooter").removeClass("page_dl");$("#goTop").removeClass("dl");$("#pageWp").removeClass("hdl")};var jumptodetail=function(a,b){if(a=="ucompany"){window.location.href=$_CONFIG.domain+"company/detail.php?coid="+b}return false};var viewHeight=window.innerHeight;var t=$("#pageTop .btnbox").offset().top;$(window).scroll(function(a){if($("#pageWp").hasClass("off")){$("#pageWp").removeClass("off")}var b=$(window).scrollTop();if(b>t){$("#pageTop .btnbox").addClass("fix")}else{$("#pageTop .btnbox").removeClass("fix")}if($(window).scrollTop()>=viewHeight){$("#goTop").show()}else{$("#goTop").hide()}});